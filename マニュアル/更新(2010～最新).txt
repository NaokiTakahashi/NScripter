NScripterの暫定更新データです。
2018/02/23
Ver3.04公開
NSDCallとNSDLoadで、前に読んだ番号に上書きした場合に、Deleteが
自動で呼ばれておらずメモリリークしていた問題を修正しました。

2015/09/12
Ver3.03公開
ns2アーカイブから(.pngではなく).bmp形式のファイルを読み込むことが
出来なかったバグが修正されました。ほかは3.02とかわりません。
アーカイブにツールを梱包し忘れていたので入れました。

2015/09/03
Ver3.02公開
セーブデータの文字列制限がとても短くなっていたのを修正しました。
セキュリティ問題に関しては修正済みの状態です。

2015/09/02
Ver3.01公開
先祖返りしていた問題を直しました。セキュリティ問題への修正は済ませました。
問題がなければ、多分これで最終版です。
（重要：これ以前の全てのバージョンにセキュリティ問題が存在します。
　必ず最新版をダウンロードして差し替えてください）


2015/08/28
■セキュリティ上の問題を修正
NScripter最終版　Ver3.00公開
セキュリティに関わる問題を修正
（重要：これ以前の全てのバージョンにセキュリティ問題が存在します。
　必ず最新版をダウンロードして差し替えてください）
詳細文書の内容はこうします。
---
NScripterのセキュリティ問題を修正しました。

脆弱性の存在するバージョン：
　Ver3.00未満の全てのバージョン
脆弱性の内容：
　エンジンが生成する物ではない外部で作成された不正なセーブデータを読み込ませることによる任意コード実行
脆弱性によって発生しうる影響：
　任意のコードを実行される可能性がある。
脆弱性への対応方法：
　実行ファイルをVer3.00に差し替える。または、外部から安全の保証のないセーブデータを持ち込まない。
--

■XP以降専用になった
WindowsXPより前のOSでも動くexeを出力するコンパイル環境をなくしてしまったためです。
とはいえ、MSのWindows自体のサポートがもうXP以降しかありませんので、これは時代の流れだと思います。
以前のデータはそのまま残しておきます。

■DirectX9（November 2008）以降用になった
これもコンパイル環境の更新のためです。
かなり古いバージョンなので特に問題はないかと。

■各種バグ修正

■変数の最大数とラベルの最大数が増やせるようになった。
　スクリプト先頭にコメントで;mode800と書く記法がありましたが、あれにもうちょっと細かいのを増やしました（旧タイプも使えます）。
（起動時設定の新形式の仕様）
;$V2000G1000S800,600L10000
（解説）
以下の設定は、大文字小文字を区別しません。

一行目に;$で、その行は設定モードになります。

V数　で変数の数を設定します。0スタートなので、与えた数-1が最大の変数番号になります。

G番号　で最小のグローバル変数の番号を設定します。

S幅,高さ　で画面サイズを指定します。ワイドスクリーンでもいけます。

L数　でラベルの最大数を設定します。この数値はファイルログの最大数も兼ねています。初期値10000なので、よほどの事がない限りいじる必要はないかと。

■アップデートパッチが作りやすくなった。
同梱のnscmake2.exeを使うと、スクリプトの指定した番号以降をアップデート用のスクリプト(拡張子.np)として暗号化できます。
（指定した番号までは従来と同じnscript.datになります）
これらは後からインストールフォルダにコピーすればスクリプトとしてnscript.datに付け足すことが出来ます。
また、define節、実行節どちらでも使えるlabelexistという命令が付け加えられていて、これは「ラベルが存在するかどうか」を返します。
たとえばこういう使い方をします。
(nscript.datに含まれるスクリプト)
labelexist %0,*append
if %0=1 goto *append ; 追加ディスク処理にジャンプ
タイトル画面に追加コンテンツへのジャンプボタンをつける、など応用はいろいろあると思います。

また、アーカイブはns2であれば歯抜け番号でも付け足していけるので、アップデート時にはそれを利用してください。

■ＣＰＵ使用率の低減

■命令追加
MOSAICOUT モザイク最大サイズ,分割数,時間
MOSAICIN モザイク最大サイズ,分割数,時間
トランジションエフェクトにも存在するモザイク処理の、より指定が細かくて、ワイドスクリーン時のバグを修正したバージョンです。
トランジションエフェクトというよりも個別の命令なので、分離して実装しました。
実行した後にVRAMが不定状態になるのは既存のものと同じなので、何か他の画面への遷移が必要です。
